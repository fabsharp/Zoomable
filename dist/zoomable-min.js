var Zoomable=function(){"use strict";!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var t=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,i){i=i||Object.create(null);var o=document.createEvent("Event");o.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var r,s=2;s<t.length;s++)o[r=t[s]]=i[r]||e[s];o.buttons=i.buttons||0;var a=0;return a=i.pressure&&o.buttons?i.pressure:o.buttons?.5:0,o.x=o.clientX,o.y=o.clientY,o.pointerId=i.pointerId||0,o.width=i.width||0,o.height=i.height||0,o.pressure=a,o.tiltX=i.tiltX||0,o.tiltY=i.tiltY||0,o.twist=i.twist||0,o.tangentialPressure=i.tangentialPressure||0,o.pointerType=i.pointerType||"",o.hwTimestamp=i.hwTimestamp||0,o.isPrimary=i.isPrimary||!1,o}var i=window.Map&&window.Map.prototype.forEach?Map:o;function o(){this.array=[],this.size=0}o.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}};var r=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],s=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],a={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,c={pointermap:new i,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=new n(t,e);return e.preventDefault&&(i.preventDefault=e.preventDefault),i._target=i._target||e.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<r.length;i++)n[e=r[i]]=t[e]||s[i],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in a?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,o=[];i!==document&&!i.contains(t.relatedTarget);)if(o.push(i),!(i=i.parentNode))return;n&&o.reverse(),o.forEach(function(n){t.target=n,e.call(this,t)},this)},setCapture:function(t,e,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var o=new n("gotpointercapture");o.pointerId=t,o._target=e,i||this.asyncDispatchEvent(o)},releaseCapture:function(t,e){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var o=new n("lostpointercapture");o.pointerId=t,o._target=i,e||this.asyncDispatchEvent(o)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};c.boundHandler=c.eventHandler.bind(c);var h={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,o,r=t.elementFromPoint(e,n);for(o=this.targetingShadow(r);o;){if(i=o.elementFromPoint(e,n)){var s=this.targetingShadow(i);return this.searchRoot(s,e,n)||i}o=this.olderShadow(o)}return r}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},l=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),f=Array.prototype.slice.call.bind(Array.prototype.slice),d=Array.prototype.filter.call.bind(Array.prototype.filter),v=window.MutationObserver||window.WebKitMutationObserver,m={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function b(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),v&&(this.observer=new v(this.mutationWatcher.bind(this)))}function g(t){return"body /shadow-deep/ "+y(t)}function y(t){return'[touch-action="'+t+'"]'}function E(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}b.prototype={watchSubtree:function(t){this.observer&&h.canTarget(t)&&this.observer.observe(t,m)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){l(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(f(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=p(t,this.findElements,this);return e.push(d(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var w=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],T="",_=window.PointerEvent||window.MSPointerEvent,P=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;var S=c.pointermap,O=[1,4,2,8,16],I=!1;try{I=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var M,x={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,r=0,s=n.length;r<s&&(e=n[r]);r++){var a=Math.abs(i-e.x),u=Math.abs(o-e.y);if(a<=25&&u<=25)return!0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=S.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=S.get(this.POINTER_ID),n=this.prepareEvent(t);I||(n.buttons=O[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),S.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);I||this.prepareButtonsForMove(e,t),e.button=-1,S.set(this.POINTER_ID,t),c.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=S.get(this.POINTER_ID),n=this.prepareEvent(t);if(!I){var i=O[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}S.set(this.POINTER_ID,t),n.buttons&=~O[n.button],0===n.buttons?c.up(n):c.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);I||this.prepareButtonsForMove(e,t),e.button=-1,S.set(this.POINTER_ID,t),c.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);I||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse()},deactivateMouse:function(){S.delete(this.POINTER_ID)}},C=c.captureInfo,D=h.findTarget.bind(h),Y=h.allShadows.bind(h),L=c.pointermap,X={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){M.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,c.listen(t,this.events),Y(t).forEach(function(t){t._scrollType=n,c.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,c.unlisten(t,this.events),Y(t).forEach(function(t){t._scrollType=void 0,c.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute("touch-action"),i=this.touchActionToScrollType(n),o=this.touchActionToScrollType(e);i&&o?(t._scrollType=i,Y(t).forEach(function(t){t._scrollType=i},this)):o?this.elementRemoved(t):i&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return"none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===L.size||1===L.size&&L.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),i=n.pointerId=t.identifier+2;n.target=C[i]||D(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var o=this;return n.preventDefault=function(){o.scrolling=!1,o.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else{var i=t.changedTouches[0],o=n,r="Y"===n?"X":"Y";e=Math.abs(i["client"+o]-this.firstXY[o])>=Math.abs(i["client"+r]-this.firstXY[r])}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,o=t.length;i<o&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(L.size>=e.length){var n=[];L.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){L.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=L.get(e.pointerId);if(n){var i=n.out,o=n.outTarget;c.move(e),i&&o!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=o,i.target=o,e.target?(c.leaveOut(i),c.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){L.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=x.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(o,2500)}}};M=new b(X.elementAdded,X.elementRemoved,X.elementChanged,X);var R,z,N,A=c.pointermap,k=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,G={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return k&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){A.delete(t)},MSPointerDown:function(t){A.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e)}};function H(t){if(!c.pointermap.has(t)){var e=new Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function F(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function j(t){return 0!==c.pointermap.get(t).buttons}function K(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function W(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}window.navigator.msPointerEnabled?(R=function(t){H(t),F(this),j(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t))},z=function(t){H(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(R=function(t){H(t),F(this),j(t)&&c.setCapture(t,this)},z=function(t){H(t),c.releaseCapture(t)}),N=function(t){return!!c.captureInfo[t]},function(){if(_){w.forEach(function(t){String(t)===t?(T+=y(t)+E(t)+"\n",P&&(T+=g(t)+E(t)+"\n")):(T+=t.selectors.map(y)+E(t.rule)+"\n",P&&(T+=t.selectors.map(g)+E(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=T,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",G)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",x),void 0!==window.ontouchstart&&c.registerSource("touch",X);c.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:R},releasePointerCapture:{value:z},hasPointerCapture:{value:N}});var V,U,B=function(){function t(t){var e=this;this.element=t,this._cache=Array(),this._startPosition={x:0,y:0},this._initialDistance=0,this._justStarted=!1,this._inProgress=!1,this._downX=0,this._downY=0,this._cancel=!1,this._threshold=10,t.addEventListener("pointerdown",function(t){t.preventDefault(),e._onPointerDown.call(e,t)}),t.addEventListener("pointermove",function(t){t.preventDefault(),e._onPointerMove.call(e,t)}),t.addEventListener("pointerup",function(t){t.preventDefault(),e._onPointerUp.call(e,t)}),t.addEventListener("gesture-start",function(t){e._onGestureStart.call(e,t)}),t.addEventListener("gesture-move",function(t){e._onGestureMove.call(e,t)}),t.addEventListener("gesture-end",function(t){e._onGestureEnd.call(e,t)})}return t.prototype._onPointerDown=function(t){if("mouse"!==t.pointerType||1===t.buttons)if(this._downX=t.clientX,this._downY=t.clientY,0===this._cache.length){this._startPosition={x:t.clientX,y:t.clientY},this._target=t.target,this._target.setPointerCapture(t.pointerId),this._cache.push(t),this._justStarted=!0,this._initialDistance=0;var e=new CustomEvent("gesture-start",{bubbles:!0,detail:{srcEvent:t}});this.element.dispatchEvent(e)}else this._startPosition=K(this._startPosition,{x:t.x,y:t.y}),this._initialDistance=this.getDistance(),this._cache.push(t)},t.prototype.getDistance=function(){var t=0;if(this._cache.length>1)for(var e=0;e<this._cache.length-1;e+=1){var n=W(this._cache[e],this._cache[e+1]);n>t&&(t=n)}return t},t.prototype.getCenter=function(){var t;return t=this._cache[0]?{x:this._cache[0].clientX,y:this._cache[0].clientY}:{x:this._downX,y:this._downY},this._cache.length>1&&(t=K(t,{x:this._cache[1].clientX,y:this._cache[1].clientY})),t},Object.defineProperty(t.prototype,"transform",{get:function(){var t=this.getCenter(),e=this.getDistance()-this._initialDistance,n=t.x-this._startPosition.x,i=t.y-this._startPosition.y,o=W(t,this._startPosition),r=1;return 0!==e&&0!==this._initialDistance&&(r+=e/this._initialDistance),{center:t,pointers:this._cache.slice(0),distance:e,scale:r,translateX:n,translateY:i,translation:o}},enumerable:!0,configurable:!0}),t.prototype._onPointerMove=function(t){if(("mouse"!==t.pointerType||1===t.buttons)&&this._downX!==t.clientX&&this._downY!==t.clientY){for(var e=0;e<this._cache.length;e+=1)if(this._cache[e].pointerId===t.pointerId){this._justStarted&&(this._justStarted=!1,this._initialDistance=this.getDistance(),this._inProgress=!0);for(var n=0;n<this._cache.length;n+=1)this._cache[n].pointerId===t.pointerId&&(this._cache[n]=t)}var i=new CustomEvent("gesture-move",{bubbles:!0,detail:{srcEvent:t}});this.element.dispatchEvent(i)}},t.prototype._onPointerUp=function(t){this._inProgress&&(this._inProgress=!1);for(var e=-1,n=0;n<this._cache.length;n+=1)this._cache[n].pointerId===t.pointerId&&(e=n);if(1===this._cache.length){var i=new CustomEvent("gesture-end",{bubbles:!0,detail:{srcEvent:t}});this.element.dispatchEvent(i)}-1!==e&&this._cache.splice(e,1)},t.prototype._onGestureStart=function(t){this._cancel=!1},t.prototype._onGestureMove=function(t){var e={x:t.detail.srcEvent.clientX,y:t.detail.srcEvent.clientY},n={x:this._downX,y:this._downY};Math.abs(W(e,n))>this._threshold&&(this._cancel=!0)},t.prototype._onGestureEnd=function(t){var e=this;if(this._cancel)this._timeout&&(clearTimeout(this._timeout),this._timeout=null);else if(this._timeout){clearTimeout(this._timeout),this._timeout=null;var n=new CustomEvent("double-tap",{bubbles:!0});this.element.dispatchEvent(n)}else this._timeout=setTimeout(function(){e._timeout=null;var t=new CustomEvent("tap",{bubbles:!0});e.element.dispatchEvent(t)},250)},t}(),q="";function Z(t,e,n,i){t[V](q+e,"wheel"===U?n:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===t.type?0:1,deltaX:0,deltaY:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"===U?(e.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-.025*t.wheelDeltaX)):e.deltaY=t.deltaY||t.detail,n(e)},i||!1)}window.addEventListener?V="addEventListener":(V="attachEvent",q="on"),U="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var $,J=($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function Q(t){for(var e=t,n=0,i=0;e;){if("BODY"===e.tagName){var o=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop;n+=e.offsetLeft-o+e.clientLeft,i+=e.offsetTop-r+e.clientTop}else n+=e.offsetLeft-e.scrollLeft+e.clientLeft,i+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:n,y:i}}var tt=function(t){function e(e,n){var i,o,r,s=t.call(this,e)||this;return s.element=e,s.options=n,s.offsetX=0,s.offsetY=0,s.initial={x:0,y:0,scale:1},s.scale=1,s.x=0,s.y=0,s.currentScale=1,s.element.addEventListener("gesture-move",function(){s._OnGestureMove.call(s)}),s.element.addEventListener("gesture-end",function(){s._OnGestureEnd.call(s)}),s.element.addEventListener("double-tap",function(){s._onDoubleTap.call(s)}),Z(i=e,U,o=function(t){if(t.preventDefault(),s._executeGesturesOptions("zoom","onZoom")){var n=Q(e),i=void 0,o=void 0;t.originalEvent?(i=t.originalEvent.clientX-n.x-s.x,o=t.originalEvent.clientY-n.y-s.y):(i=t.clientX-n.x-s.x,o=t.clientY-n.y-s.y),t.deltaY>0?s.zoomAt(i,o,.7*s.scale):s.zoomAt(i,o,1.3*s.scale),s.apply(!1),s.currentScale=s.scale;var r=new CustomEvent("zoomable-gesture-end",{bubbles:!0});s.element.dispatchEvent(r)}},r),"DOMMouseScroll"===U&&Z(i,"MozMousePixelScroll",o,r),s}return J(e,t),e.prototype._onDoubleTap=function(){if(this._executeGesturesOptions("doubleTap","onDoubleTap")){var t=this.transform,e=Q(this.element),n=t.center.x-e.x-this.x,i=t.center.y-e.y-this.y;this.zoomAt(n,i,2*this.scale),this.apply(!0)}},e.prototype._OnGestureMove=function(){var t=this._cache.length>1?"zoom":"pan",e="zoom"===t?"onZoom":"onPan";if(this._executeGesturesOptions(t,e)){var n=this.transform,i=Q(this.element),o=n.center.x-i.x-this.x,r=n.center.y-i.y-this.y;this._cache.length>1&&this.zoomAt(o,r,n.scale*this.currentScale),this.translate(n.translateX,n.translateY),this.apply(!1)}},e.prototype._OnGestureEnd=function(){this.x+=this.offsetX,this.y+=this.offsetY,this.offsetX=0,this.offsetY=0,this.currentScale=this.scale;var t=new CustomEvent("zoomable-gesture-end",{bubbles:!0});this.element.dispatchEvent(t)},e.prototype._executeGesturesOptions=function(t,e){return!(this.options&&this.options.gestures&&"boolean"==typeof this.options.gestures[t]&&!this.options.gestures[t])&&(!this.options||!this.options.gestures||"function"!=typeof this.options.gestures[e]||!1!==this.options.gestures[e]())},e.prototype.translate=function(t,e){this.offsetX=t,this.offsetY=e;var n=new CustomEvent("onTranslate",{bubbles:!0});this.element.dispatchEvent(n)},e.prototype.zoomAt=function(t,e,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var r=this.options&&this.options.zoomMax&&this.options.zoomMax<n?this.options.zoomMax:n,s=o?this.initial.scale:this.scale,a=t/s,u=e/s,c=a+(t-a)-a*r,h=u+(e-u)-u*r;!0===i&&(c+=this.element.offsetWidth/2-t,h+=this.element.offsetHeight/2-e);this.scale=r,!0===o&&(this.x=this.initial.x,this.y=this.initial.y),this.x+=c,this.y+=h;var l=new CustomEvent("onZoomAt",{bubbles:!0});this.element.dispatchEvent(l)},e.prototype.apply=function(t,e){var n=this.x+this.offsetX,i=this.y+this.offsetY,o={bubbles:!0,detail:{x:n,y:i,scale:this.scale,animate:t,duration:e},cancelable:!0},r=new CustomEvent("onApply",o);!this.element.dispatchEvent(r)||(this.element.style.transition=!0===t?e?e+"s":"1s":"0s",this.element.style.transform="translate("+n+"px, "+i+"px) scale("+this.scale+")")},e}(B),et=function(){function t(t,e,n){var i=this;this.parent=t,this.options=n,this.initialScale=1,this.parent.addEventListener("onApply",function(t){t.preventDefault();var e=t,n=e.detail.animate,o=e.detail.duration,r=e.detail.x,s=e.detail.y,a=e.detail.scale;i.img.style.transition=!0===n?o?o+"s":"1s":"0s",i.img.style.transform="translate("+r+"px, "+s+"px) scale("+a+")"}),this.zoomable=new tt(this.parent,this.options),"string"==typeof e?(this.img=document.createElement("img"),this.img.style.transformOrigin="0 0 0",this.img.onload=function(){t.appendChild(i.img),i.responsive();var e=new CustomEvent("background-ready",{bubbles:!0});i.parent.dispatchEvent(e)},this.img.src=e):"object"==typeof e&&(this.img=e,this.img.style.transformOrigin="0 0 0",this.responsive()),this.parent.addEventListener("zoomable-gesture-end",function(){i.bound.call(i)}),window.addEventListener("resize",function(){i.responsive()})}return t.prototype.isInlineSVG=function(){return"object"==typeof this.img.width},t.prototype.getImgWidth=function(){return this.isInlineSVG()?this.img.width.baseVal.value:this.img.width},t.prototype.getImgOffsetWidth=function(){return this.isInlineSVG()?this.img.width.baseVal.value:this.img.offsetWidth},t.prototype.getImgHeight=function(){return this.isInlineSVG()?this.img.height.baseVal.value:this.img.height},t.prototype.bound=function(){if(!this.options||!1!==this.options.bound)if(this.zoomable.scale<this.initialScale)this.responsive();else{var t=this.getImgWidth()*this.zoomable.currentScale,e=this.getImgHeight()*this.zoomable.currentScale;t<this.parent.offsetWidth?this.zoomable.x=(this.parent.offsetWidth-t)/2:(this.zoomable.x>0&&(this.zoomable.x=0),this.zoomable.x<this.parent.offsetWidth-t&&(this.zoomable.x=this.parent.offsetWidth-t)),e<this.parent.offsetHeight?this.zoomable.y=(this.parent.offsetHeight-e)/2:(this.zoomable.y>0&&(this.zoomable.y=0),this.zoomable.y<this.parent.offsetHeight-e&&(this.zoomable.y=this.parent.offsetHeight-e)),this.zoomable.apply(!0,.5)}},t.prototype.responsive=function(t,e){var n=this.getImgWidth()/this.getImgHeight(),i=this.parent.offsetWidth,o=i/n;o>this.parent.offsetHeight&&(i=(o=this.parent.offsetHeight)*n);var r=i/this.getImgOffsetWidth(),s=0,a=0;o<this.parent.offsetHeight&&(a=(this.parent.offsetHeight-o)/2),i<this.parent.offsetWidth&&(s=(this.parent.offsetWidth-i)/2),this.zoomable.initial={x:s,y:a,scale:r},this.zoomable.x=s,this.zoomable.y=a,this.zoomable.scale=r,this.zoomable.currentScale=r,this.initialScale=r,this.zoomable.apply(t,e)},t}();return function(t,e,n){return new et(t,e,n)}}();
